## X-07 BASIC FILE
## Converted by Xtase fgalliat @ 10/2016
##
## FILE NAME : SDOS
##
##
## USE:PREPROCESSOR
##
10 INIT #1, "COM:", 8000, "B"

15 REM clear pour l'espace des strings
17 REM ATTNT : FN est un mot reserved

20 CLEAR 200
49 GOTO $MAIN_MENU

50 REM DFLBL DIR
60 CM$=CHR$(255)+CHR$(254)+"DIR"+CHR$(10)
65 PRINT #1, CM$;
70 GOSUB $READ_CONTENT
80 GOTO $MAIN_MENU

90 REM DFLBL CAT
95 CLS : INPUT "Filename";F$
100 CM$=CHR$(255)+CHR$(254)+"CAT:"+F$+CHR$(10)
107 PRINT #1, CM$;
110 GOSUB $READ_CONTENT
120 GOTO $MAIN_MENU

150 REM DFLBL LIST_TO_SD
155 CLS : INPUT "Filename";F$
160 CM$=CHR$(255)+CHR$(254)+"SAVE_T:"+F$+CHR$(10)
165 PRINT #1, CM$;
166 REM list n agit qu a partir du program en cours
167 PRINT "Please Type :"
170 PRINT "LIST #1";
175 END
180 GOSUB $READ_CONTENT
185 GOTO $MAIN_MENU

200 REM DFLBL WRITE_TO_SD
205 CLS : INPUT "Filename";F$
210 TX$="" : LN$ = ""
220 PRINT ">"; : LINE INPUT LN$
225 IF LN$ = "" THEN GOTO 250
230 TX$ = TX$ + LN$ + CHR$(13)+ CHR$(10)
235 GOTO 220

250 REM PRINT "WILL WRITE ";TX$ 
252 CM$=CHR$(255)+CHR$(254)+"WRITE_T:"+F$+CHR$(10)
255 PRINT #1, CM$;
256 REM une petite pause
257 FOR Z=1TO 150 : NEXT Z
260 PRINT #1, TX$
265 PRINT #1, CHR$(0);
270 GOSUB $READ_CONTENT
275 GOTO $MAIN_MENU

600 REM DFLBL READ_CONTENT
610 REM DISPLAY RESULT UNTILL 0x00
640 A = INP(#1)
650 IF A = 0 THEN GOTO 700
660 PRINT CHR$(A);
670 GOTO $READ_CONTENT
700 INPUT "-EOF-";
710 RETURN
  
800 REM DFLBL LOAD_FROM_SD
815 CLS : INPUT "Filename";F$
820 REM CM$=CHR$(255)+CHR$(254)+"LOAD_T:"+F$+CHR$(10)
827 INPUT "NOT YET IMPL. !";F$
850 GOTO $MAIN_MENU
  
1000 REM DFLBL MAIN_MENU
1001 REM    12345678901234567890
1002 CLS
1010 PRINT "   _== SDOS II ==_"
1020 PRINT "1. DIR  | 2. CAT"
1030 PRINT "3. SAVE | 4. LOAD"
1040 INPUT "5. WRITE FILE";C$  
1050 REM INPUT "CHOICE";C$
  
1100 IF C$ = "1" THEN GOSUB $DIR
1110 IF C$ = "2" THEN GOSUB $CAT
1120 IF C$ = "3" THEN GOSUB $LIST_TO_SD
1130 IF C$ = "4" THEN GOSUB $LOAD_FROM_SD
1140 IF C$ = "5" THEN GOSUB $WRITE_TO_SD
1150 IF C$ = "0" THEN GOSUB $END
1160 GOTO $MAIN_MENU
          
2000 REM DFLBL END
2010 CLS : PRINT "Bye"